langcode: en
status: true
dependencies:
  module:
    - node
    - rest
    - serialization
    - user
id: search_api
label: "Search API"
module: views
description: "REST endpoint returning nodes with an exposed q filter on title."
tag: ""
base_table: node_field_data
base_field: nid
core: "10"
display:
  default:
    display_plugin: default
    id: default
    display_title: Master
    position: 0
    display_options:
      access:
        type: perm
        options:
          perm: "access content"
      query:
        type: views_query
      cache:
        type: tag
      pager:
        type: some
        options:
          items_per_page: 9
      style:
        type: default
      row:
        type: fields
      fields:
        title:
          id: title
          table: node_field_data
          field: title
          label: ""
          alter:
            make_link: true
            path: "{{ path }}"
          plugin_id: field
        body:
          id: body
          table: node__body
          field: body
          label: ""
          plugin_id: field
          settings:
            link_to_entity: false
            trim: true
            max_length: 200
            summary: true
          relationship: none
          group_type: group
          exclude: false
          element_default_classes: true
      filters:
        status:
          id: status
          table: node_field_data
          field: status
          value: "1"
          plugin_id: boolean
        type:
          id: type
          table: node_field_data
          field: type
          plugin_id: bundle
          # Optionnel: restreins aux types voulus, sinon commente "value"
          # value:
          #   article: article
        title:
          id: title
          table: node_field_data
          field: title
          plugin_id: string
          operator: contains
          exposed: true
          expose:
            label: "q"
            identifier: q
      sorts: {}
  rest_export_1:
    display_plugin: rest_export
    id: rest_export_1
    display_title: "REST export"
    position: 1
    display_options:
      path: "api/search"
      pager:
        type: some
        options:
          items_per_page: 9
      style:
        type: serializer
        options:
          formats:
            json: json
      row:
        type: fields
